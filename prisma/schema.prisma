generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model inventarios {
  inve_id        Int         @id @unique(map: "inve_id_UNIQUE") @default(autoincrement())
  inve_nome      String      @db.VarChar(80)
  inve_data      DateTime    @db.Date
  inve_concluido Int         @db.TinyInt
  inve_campus    String      @db.VarChar(100)
  historico      historico[]
  salas          salas[]
}

model bens {
  bens_id          Int         @default(autoincrement())
  bens_sala_id     Int
  bens_nome        String      @db.VarChar(200)
  bens_tombo       String      @db.VarChar(15)
  bens_responsavel String      @db.VarChar(80)
  bens_decricao    String?     @db.MediumText
  bens_valor       Decimal?    @db.Decimal(10, 2)
  salas            salas       @relation(fields: [bens_sala_id], references: [sala_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_itens_sala1")
  historico        historico[]

  @@id([bens_id, bens_sala_id])
  @@index([bens_sala_id], map: "fk_itens_sala1_idx")
}

model salas {
  sala_id      Int         @unique(map: "Sala_id_UNIQUE") @default(autoincrement())
  sala_nome    String      @db.VarChar(150)
  sala_inve_id Int
  bens         bens[]
  historico    historico[]
  inventarios  inventarios @relation(fields: [sala_inve_id], references: [inve_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_sala_inventarios1")

  @@id([sala_id, sala_inve_id])
  @@index([sala_inve_id], map: "fk_sala_inventarios1_idx")
}

model usuarios {
  usua_id     Int         @id @unique(map: "audi_id_UNIQUE") @default(autoincrement())
  usua_email  String      @unique(map: "audi_email_UNIQUE") @db.VarChar(80)
  usua_senha  String      @db.VarChar(40)
  usua_funcao String      @db.VarChar(30)
  usua_status Int         @db.TinyInt
  usua_nome   String      @db.VarChar(100)
  historico   historico[]
}

model historico {
  hist_id             Int         @unique(map: "hist_id_UNIQUE") @default(autoincrement())
  hist_bens_id        Int
  hist_inventarios_id Int
  hist_usuarios_id    Int
  hist_salas_id       Int
  hist_estado_bem     String      @db.VarChar(60)
  hist_item_ocioso    Int         @db.TinyInt
  hist_imagem         String?     @db.VarChar(200)
  hist_encontrado     Int         @db.TinyInt
  usuarios            usuarios    @relation(fields: [hist_usuarios_id], references: [usua_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_historico_Usuario1")
  inventarios         inventarios @relation(fields: [hist_inventarios_id], references: [inve_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_historico_inventarios1")
  bens                bens        @relation(fields: [hist_bens_id], references: [bens_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_historico_itens1")
  salas               salas       @relation(fields: [hist_salas_id], references: [sala_id], onDelete: NoAction, onUpdate: NoAction, map: "fk_historico_sala1")

  @@id([hist_id, hist_bens_id, hist_inventarios_id, hist_usuarios_id, hist_salas_id])
  @@index([hist_usuarios_id], map: "fk_historico_Usuario1_idx")
  @@index([hist_inventarios_id], map: "fk_historico_inventarios1_idx")
  @@index([hist_bens_id], map: "fk_historico_itens1_idx")
  @@index([hist_salas_id], map: "fk_historico_sala1_idx")
}
